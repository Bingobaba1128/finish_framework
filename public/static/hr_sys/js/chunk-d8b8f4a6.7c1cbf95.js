(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8b8f4a6"],{b64b:function(e,t,a){var n=a("23e7"),i=a("7b0b"),s=a("df75"),o=a("d039"),c=o((function(){s(1)}));n({target:"Object",stat:!0,forced:c},{keys:function(e){return s(i(e))}})},eee5:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex",width:"100%",height:"100%"}},[a("div",{staticStyle:{width:"30%",height:"100%",overflow:"auto"}},[a("div",{staticClass:"custom-tree-container",staticStyle:{background:"#eee",height:"100%"}},[a("el-tree",{attrs:{data:e.list,"node-key":"id","highlight-current":"","default-expand-all":"",props:e.defaultProps,"expand-on-click-node":!1},on:{"node-click":e.handleNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node;return a("span",{staticClass:"custom-tree-node"},[a("span",{staticClass:"company_tree_style"},[e._v(e._s(n.label))])])}}])})],1)]),a("div",{staticStyle:{width:"100%",background:"#ccc",padding:"15px"}},[a("el-button",{attrs:{size:"mini",round:"",type:"primary",disabled:e.parentIdDisabled},on:{click:e.add}},[e._v("添加")]),a("el-button",{attrs:{size:"mini",round:"",type:"info",disabled:e.stateDisabled},on:{click:e.modify}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",round:"",type:"danger"},on:{click:e.romove}},[e._v("注销")]),a("div",{staticStyle:{margin:"15px 0 0 0"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{"tooltip-effect":"dark",border:!0,"row-style":{height:"20px"},"cell-style":{padding:"0px"}}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center"}}),a("el-table-column",{attrs:{property:"gangHao",label:"员工编号",align:"center"}}),a("el-table-column",{attrs:{property:"jNo",label:"姓名",align:"center"}}),a("el-table-column",{attrs:{property:"maQuanity",label:"公司",align:"center"}}),a("el-table-column",{attrs:{property:"lot",label:"部门",align:"center"}}),a("el-table-column",{attrs:{property:"clothId",label:"入职时间",align:"center"}}),a("el-table-column",{attrs:{property:"factQuanity",label:"出生年月",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"number",min:"0"},on:{change:function(a){return e.confirmWriteNum(t.row)}},model:{value:t.row.factQuanity,callback:function(a){e.$set(t.row,"factQuanity",a)},expression:"scope.row.factQuanity"}})]}}])}),a("el-table-column",{attrs:{property:"cangku",label:"联系电话",align:"center"}}),a("el-table-column",{attrs:{property:"state",label:"状态",align:"center"}})],1)],1)],1),a("el-dialog",{attrs:{width:"25%",title:e.companyTitle,visible:e.companyVisible,"append-to-body":"",closeOnClickModal:e.closeOnClickModal,closeOnPressEscape:e.closeOnPressEscape},on:{"update:visible":function(t){e.companyVisible=t}}},[a("div",{staticStyle:{display:"flex",justifyContent:"center",lineHeight:"50px"}},[a("div",{staticStyle:{margin:"0 8px",fontSize:"18px"}},[e._v("公司名称")]),a("el-input",{staticStyle:{width:"180px"},model:{value:e.companyName,callback:function(t){e.companyName=t},expression:"companyName"}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.addCompany(t)}}},[e._v("提交")])],1)]),a("el-dialog",{attrs:{width:"25%",title:e.departmentTitle,visible:e.departmentVisible,"append-to-body":"",closeOnClickModal:e.closeOnClickModal,closeOnPressEscape:e.closeOnPressEscape},on:{"update:visible":function(t){e.departmentVisible=t}}},[a("div",{staticStyle:{display:"flex",justifyContent:"center",lineHeight:"50px"}},[a("div",{staticStyle:{margin:"0 8px",fontSize:"18px"}},[e._v("部门名称")]),a("el-input",{staticStyle:{width:"180px"},model:{value:e.departmentName,callback:function(t){e.departmentName=t},expression:"departmentName"}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.addDepartment(t)}}},[e._v("提交")])],1)])],1)},i=[],s=(a("b64b"),a("f292")),o=a("b383"),c=a.n(o),l={name:"jtgl",data:function(){return{id:1e3,curNode:null,isParentId:"",selectDeptId:"",switchType:"",companyTitle:"",departmentTitle:"",companyName:"",departmentName:"",closeOnClickModal:!1,closeOnPressEscape:!1,companyVisible:!1,departmentVisible:!1,parentIdDisabled:!1,stateDisabled:!1,defaultProps:{children:"children",label:"deptName"},list:[{deptName:"集团",state:20,children:[]}]}},methods:{handleNodeClick:function(e){var t=this;if(this.selectDeptId=e.deptId,this.isParentId=e.parentId,this.selectDeptId||(this.selectDeptId=0),this.curNode=e,20==this.curNode.state)this.stateDisabled=!0;else{this.stateDisabled=!1;var a={parentId:this.curNode.deptId};s["a"](a).then((function(e){t.$set(t.curNode,"children",e.data)})).catch((function(e){console.log(e)}))}this.curNode.state||0==this.curNode.parentId?this.parentIdDisabled=!1:this.parentIdDisabled=!0},add:function(){this.switchType=1,this.curNode?0==this.curNode.parentId?(this.departmentName="",this.departmentVisible=!0,this.departmentTitle="部门新增"):(this.companyName="",this.companyVisible=!0,this.companyTitle="公司新增"):this.$message({message:"请先选择要添加的内容",duration:2e3})},modify:function(){this.switchType=2,this.companyName=this.curNode.deptName,this.curNode?0==this.curNode.parentId?(this.companyName=this.curNode.deptName,this.companyVisible=!0,this.companyTitle="公司修改"):(this.departmentName=this.curNode.deptName,this.departmentVisible=!0,this.departmentTitle="部门修改"):this.$message({message:"请先选择要添加的内容",duration:2e3})},romove:function(){var e=this;this.curNode?this.$confirm("确认注销?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t={deptId:e.selectDeptId,state:"1"};s["e"](c.a.stringify(t)).then((function(t){if(200==t.code)for(var a=0,n=Object.keys(e.curNode);a<n.length;a++){var i=n[a];e.$delete(e.curNode,i)}else e.$message({message:t.msg,duration:2e3})})).catch((function(e){console.log(e)}))})).catch((function(){})):this.$message({message:"请先选择要删除的内容",duration:2e3})},addCompany:function(){var e=this;if(console.log(this.selectDeptId),this.companyName)if(1==this.switchType){var t={deptName:this.companyName,parentId:this.selectDeptId,orderNo:1};console.log(t),s["c"](t).then((function(t){console.log(t),200==t.code?(e.refreshDepartment(),e.companyVisible=!1):e.$message({message:t.msg,duration:2e3})})).catch((function(e){console.log(e)}))}else{var a={deptName:this.companyName,parentId:this.selectDeptId,orderNo:1,deptId:this.selectDeptId,state:"0"};s["f"](a).then((function(t){e.$set(e.curNode,"deptName",e.companyName),e.companyVisible=!1})).catch((function(e){console.log(e)}))}else this.$message({message:"公司名称不能为空",duration:2e3})},addDepartment:function(){var e=this;if(this.departmentName)if(1==this.switchType){var t={deptName:this.departmentName,parentId:this.selectDeptId,orderNo:1};s["c"](t).then((function(t){200==t.code?(e.refreshDepartment(),e.departmentVisible=!1):e.$message({message:t.msg,duration:2e3})})).catch((function(e){console.log(e)}))}else{var a={deptName:this.departmentName,parentId:this.selectDeptId,orderNo:1,deptId:this.selectDeptId,state:"0"};s["f"](a).then((function(t){e.$set(e.curNode,"deptName",e.departmentName),e.departmentVisible=!1})).catch((function(e){console.log(e)}))}else this.$message({message:"部门名称不能为空",duration:2e3})},refreshDepartment:function(){var e=this,t={parentId:this.selectDeptId};s["a"](t).then((function(t){e.$set(e.curNode,"children",t.data)})).catch((function(e){console.log(e)}))},loadList:function(){var e=this,t={parentId:0};s["a"](t).then((function(t){e.$set(e.list[0],"children",t.data)})).catch((function(e){console.log(e)}))}},created:function(){this.loadList()}},r=l,d=a("2877"),p=Object(d["a"])(r,n,i,!1,null,"22d8ec22",null);t["default"]=p.exports},f292:function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"f",(function(){return o})),a.d(t,"e",(function(){return c})),a.d(t,"b",(function(){return l})),a.d(t,"d",(function(){return r})),a.d(t,"g",(function(){return d}));var n=a("751a"),i=function(e){return Object(n["a"])({url:"/ERP/selectDepartment",method:"get",params:e})},s=function(e){return Object(n["a"])({url:"/ERP/addDepartment",method:"post",data:e})},o=function(e){return Object(n["a"])({url:"/ERP/editDepartment",method:"post",data:e})},c=function(e){return Object(n["a"])({url:"/ERP/delDepartment",method:"post",data:e})},l=function(e){return Object(n["a"])({url:"/ERP/selectEmplyee1",method:"get",params:e})},r=function(e){return Object(n["a"])({url:"/ERP/addEmployee",method:"post",data:e})},d=function(e){return Object(n["a"])({url:"/ERP/editEmployee",method:"post",data:e})}}}]);